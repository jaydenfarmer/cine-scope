<div class="home-sections">
  <!-- Trending Section -->
  <section class="media-section">
    <div class="section-header">
      <span class="section-label">Trending</span>
      <!-- Desktop Switch -->
      <div class="section-switch desktop-only">
        <span
          class="switch-option"
          [class.active]="trendingType === 'movie'"
          (click)="setTrendingType('movie')"
          >Movies</span
        >
        <span
          class="switch-slider"
          [class.right]="trendingType === 'tv'"
        ></span>
        <span
          class="switch-option"
          [class.active]="trendingType === 'tv'"
          (click)="setTrendingType('tv')"
          >Shows</span
        >
      </div>
      <!-- Mobile Dropdown -->
      <div class="section-dropdown mobile-only">
        <select
          [(ngModel)]="trendingType"
          (ngModelChange)="setTrendingType($event)"
          class="dropdown-select"
        >
          <option value="movie">Movies</option>
          <option value="tv">Shows</option>
        </select>
      </div>
    </div>
    <app-media-row
      [items]="trendingItems"
      [mediaType]="trendingType"
    ></app-media-row>
  </section>
  <!-- Latest Trailers Section -->
  <section class="media-section">
    <div class="section-header">
      <span class="section-label">Latest Trailers</span>
      <!-- Desktop Multi-Switch -->
      <div class="section-multi-switch desktop-only">
        <span
          class="multi-switch-option"
          [class.active]="trailersCategory === 'popular'"
          (click)="setTrailersCategory('popular')"
          >Popular</span
        >
        <span
          class="multi-switch-option"
          [class.active]="trailersCategory === 'streaming'"
          (click)="setTrailersCategory('streaming')"
          >Streaming</span
        >
        <span
          class="multi-switch-option"
          [class.active]="trailersCategory === 'on_tv'"
          (click)="setTrailersCategory('on_tv')"
          >On TV</span
        >
        <span
          class="multi-switch-option"
          [class.active]="trailersCategory === 'for_rent'"
          (click)="setTrailersCategory('for_rent')"
          >For Rent</span
        >
        <span
          class="multi-switch-option"
          [class.active]="trailersCategory === 'in_theaters'"
          (click)="setTrailersCategory('in_theaters')"
          >In Theaters</span
        >
      </div>
      <!-- Mobile Dropdown -->
      <div class="section-dropdown mobile-only">
        <select
          [(ngModel)]="trailersCategory"
          (ngModelChange)="setTrailersCategory($event)"
          class="dropdown-select"
        >
          <option value="popular">Popular</option>
          <option value="streaming">Streaming</option>
          <option value="on_tv">On TV</option>
          <option value="for_rent">For Rent</option>
          <option value="in_theaters">In Theaters</option>
        </select>
      </div>
    </div>
    <app-trailer-row
      [trailerData]="latestTrailersData"
      (trailerClick)="onTrailerClick($event)"
    ></app-trailer-row>
  </section>
  <!-- What's Popular Section -->
  <section class="media-section">
    <div class="section-header">
      <span class="section-label">What's Popular</span>
      <!-- Desktop Multi-Switch -->
      <div class="section-multi-switch desktop-only">
        <span
          class="multi-switch-option"
          [class.active]="popularCategory === 'streaming'"
          (click)="setPopularCategory('streaming')"
          >Streaming</span
        >
        <span
          class="multi-switch-option"
          [class.active]="popularCategory === 'on_tv'"
          (click)="setPopularCategory('on_tv')"
          >On TV</span
        >
        <span
          class="multi-switch-option"
          [class.active]="popularCategory === 'for_rent'"
          (click)="setPopularCategory('for_rent')"
          >For Rent</span
        >
        <span
          class="multi-switch-option"
          [class.active]="popularCategory === 'in_theaters'"
          (click)="setPopularCategory('in_theaters')"
          >In Theaters</span
        >
      </div>
      <!-- Mobile Dropdown -->
      <div class="section-dropdown mobile-only">
        <select
          [(ngModel)]="popularCategory"
          (ngModelChange)="setPopularCategory($event)"
          class="dropdown-select"
        >
          <option value="streaming">Streaming</option>
          <option value="on_tv">On TV</option>
          <option value="for_rent">For Rent</option>
          <option value="in_theaters">In Theaters</option>
        </select>
      </div>
    </div>
    <app-media-row [items]="whatsPopular" [mediaType]="'movie'"></app-media-row>
  </section>
  <!-- Free to Watch Section -->
  <section class="media-section">
    <div class="section-header">
      <span class="section-label">Free to Watch</span>
      <!-- Desktop Switch -->
      <div class="section-switch desktop-only">
        <span
          class="switch-option"
          [class.active]="freeType === 'movie'"
          (click)="setFreeType('movie')"
          >Movies</span
        >
        <span class="switch-slider" [class.right]="freeType === 'tv'"></span>
        <span
          class="switch-option"
          [class.active]="freeType === 'tv'"
          (click)="setFreeType('tv')"
          >Shows</span
        >
      </div>
      <!-- Mobile Dropdown -->
      <div class="section-dropdown mobile-only">
        <select
          [(ngModel)]="freeType"
          (ngModelChange)="setFreeType($event)"
          class="dropdown-select"
        >
          <option value="movie">Movies</option>
          <option value="tv">Shows</option>
        </select>
      </div>
    </div>
    <app-media-row [items]="freeToWatch" [mediaType]="freeType"></app-media-row>
  </section>
</div>

<!-- Trailer Modal -->
<div
  class="trailer-modal-backdrop"
  *ngIf="showTrailerModal"
  (click)="closeTrailerModal()"
>
  <div class="trailer-modal" (click)="$event.stopPropagation()">
    <button class="trailer-modal-close" (click)="closeTrailerModal()">âœ•</button>
    <iframe
      *ngIf="selectedTrailerUrl"
      [src]="selectedTrailerUrl"
      width="560"
      height="315"
      frameborder="0"
      allowfullscreen
    ></iframe>
  </div>
</div>
